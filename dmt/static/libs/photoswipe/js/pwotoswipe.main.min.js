var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,r,i,n,a=e.childNodes,o=a.length,l=[],d=0;d<o;d++)t=a[d],1===t.nodeType&&(r=t.children[0],i=r.getAttribute("data-size").split("x"),n={src:r.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},t.children.length>1&&(n.title=t.children[1].innerHTML),r.children.length>0&&(n.msrc=r.children[0].getAttribute("src")),n.el=t,l.push(n));return l},r=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))},i=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,i=r(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(i){for(var n,o=i.parentNode,l=i.parentNode.childNodes,d=l.length,p=0,u=0;u<d;u++)if(1===l[u].nodeType){if(l[u]===i){n=p;break}p++}return n>=0&&a(n,o),!1}},n=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var r=e.split("&"),i=0;i<r.length;i++)if(r[i]){var n=r[i].split("=");n.length<2||(t[n[0]]=n[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},a=function(e,r,i,n){var a,o,l,d=document.querySelectorAll(".pswp")[0];if(l=t(r),o={galleryUID:r.getAttribute("data-pswp-uid"),showHideOpacity:!0,bgOpacity:1},n)if(o.galleryPIDs){for(var p=0;p<l.length;p++)if(l[p].pid==e){o.index=p;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);isNaN(o.index)||(i&&(o.showAnimationDuration=0),a=new PhotoSwipe(d,PhotoSwipeUI_Default,l,o),a.init())},o=document.querySelectorAll(e),l=0,d=o.length;l<d;l++)o[l].setAttribute("data-pswp-uid",l+1),o[l].onclick=i;var p=n();p.pid&&p.gid&&a(p.pid,o[p.gid-1],!0,!0)};initPhotoSwipeFromDOM(".repertoire__gallery");